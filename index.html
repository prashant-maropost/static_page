<link href="https://fonts.googleapis.com/css?family=Poppins:400,400i,700,700i,900,900i&amp;display=swap" rel="stylesheet">
<div data-ng-app="ticTacToe" data-ng-controller="myCtrl">
    <div class="row">
      <div class="col-sm-8">
        <table>
          <tbody>
            <tr>
              <td class="right bottom"><button data-ng-click="choice(0)">{{board[0]}}</button></td>
              <td class="right bottom"><button data-ng-click="choice(1)">{{board[1]}}</button></td>
              <td class="bottom"><button data-ng-click="choice(2)">{{board[2]}}</button></td>
            </tr>
            <tr>
              <td class="right bottom"><button data-ng-click="choice(3)">{{board[3]}}</button></td>
              <td class="right bottom"><button data-ng-click="choice(4)">{{board[4]}}</button></td>
              <td class="bottom"><button data-ng-click="choice(5)">{{board[5]}}</button></td>
            </tr>
            <tr>
              <td class="right"><button data-ng-click="choice(6)">{{board[6]}}</button></td>
              <td class="right"><button data-ng-click="choice(7)">{{board[7]}}</button></td>
              <td><button data-ng-click="choice(8)">{{board[8]}}</button></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-sm-4">
        <div class="box">
          <h1>Current Turn: {{turn}}</h1>
          <p ng-bind-html="message"></p>
          <button class="btn" data-ng-click = "reset()">Reset</button>
          <br>
        </div>
      </div>
    </div>
</div>
<style>
body{
  width: 100%;
  min-height: 100vh;
  overflow-x: hidden;
  background: linear-gradient(-21deg, #9fb8ad 0%, #1fc8db 51%, #2cb5e8 75%);
  background-size: cover;
  background-repeat: no-repeat;
  .row{
    background-color: transparent;
    .col-sm-8{
      padding: 7vh 0px 7vh;
    }

    .col-sm-4{
      .box{
        background-color: white;
        margin: 7vh 20px 0px 20px;
        padding: 25px 30px;
        border-radius: 5px;
        box-shadow: 0px 2px 7px #777;

        h1{
          font-size: 35px;
          font-family: Poppins,sans-serif;
          font-weight: 700;
        }

        p{
          margin: 25px 0px;
          font-family: Poppins,sans-serif;
          font-weight: 500;
        }

        .btn{
          background-color: red;
          color: white;
          font-family: Poppins,sans-serif;
          font-size: 14px;
          letter-spacing: 1px;
          text-transform: uppercase;
          font-weight: 700;
          float: right;
          &:hover{
            background-color: #840404;
            color: white;
          }
        }
      }
    }
  }

  table{
    margin: 0 auto;
    tbody{
      tr{
        td{
          width: 120px;
          height: 120px;
          text-align: center;
          overflow: hidden;
          button{
            width: 100%;
            height: 100%;
            background-color: transparent;
            border: none;
            font-size: 60px;
            font-family: Poppins,sans-serif;
            font-weight: 900;
            color: white;
            transition: all .3s;
            &:hover{
              cursor: pointer;
              background-color: rgba(255,255,255, 0.2);
            }

            &:focus{
              outline: none;
            }
          }
        }
        .right{
          border-right: 7px solid #eee;
        }
        .bottom{
          border-bottom: 7px solid #eee;
        }
      }
    }
  }
}
</style>
<script>
var app = angular.module("ticTacToe", ['ngSanitize']);

app.controller("myCtrl", function($scope){
  set();

  $scope.reset = function(){
    set();
  }

  $scope.choice = function(x){
    if(!$scope.end){
      var taken = check(x);

      if(taken){
        $scope.error = false;
        $scope.board[x] = $scope.turn
      }
      else{
        $scope.error = true;
      }

      var arr = checkWinner();

      if(arr[1] == "1"){
        if(arr[0] == "-"){
          $scope.message = "It looks like it's a tie. Click reset to play again.";
          $scope.end = true;
        }
        else{
          $scope.message = "The winner is " + arr[0] + " ðŸŽ‰.<br>Click reset to play again.";
          $scope.end = true;
        }
      }
      else{
        if(!$scope.error){
          $scope.message = "";
          $scope.turn = $scope.turn == "X" ? "O" : "X";
        }
        else{
          $scope.message = "Please choose an empty space.";
        }
      }
    }
  }

  function set(){
    $scope.turn = "X";
    $scope.error = false;
    $scope.message = "";
    $scope.end = false;
    $scope.board = [
      "","","",
      "","","",
      "","",""
    ];

  }

  function check(x){
    var check = true;
    if($scope.board[x] != ""){
      check = false;
    }
    return check;
  }

  function checkWinner(){
    var winningPiece = ""

    if(
      (($scope.board[0] != "") && ($scope.board[1] != "") && ($scope.board[2] != "")) &&
      (($scope.board[0] == $scope.board[1]) && ($scope.board[0] == $scope.board[2]))
      ||
      (($scope.board[0] != "") && ($scope.board[3] != "") && ($scope.board[6] != "")) &&
      (($scope.board[0] == $scope.board[3]) && ($scope.board[0] == $scope.board[6]))
      ||
      (($scope.board[0] != "") && ($scope.board[4] != "") && ($scope.board[8] != "")) &&
      (($scope.board[0] == $scope.board[4]) && ($scope.board[0] == $scope.board[8]))
    ){
        winningPiece = $scope.board[0];
    }

    if(
      (($scope.board[1] != "") && ($scope.board[4] != "") && ($scope.board[7] != "")) &&
      (($scope.board[1] == $scope.board[4]) && ($scope.board[1] == $scope.board[7]))
    ){
        winningPiece = $scope.board[1];
    }

    if(
      (($scope.board[2] != "") && ($scope.board[5] != "") && ($scope.board[8] != "")) &&
      (($scope.board[2] == $scope.board[5]) && ($scope.board[2] == $scope.board[8]))
      ||
      (($scope.board[2] != "") && ($scope.board[4] != "") && ($scope.board[6] != "")) &&
      (($scope.board[2] == $scope.board[4]) && ($scope.board[2] == $scope.board[6]))
    ){
        winningPiece = $scope.board[2];
    }

    if(
      (($scope.board[3] != "") && ($scope.board[4] != "") && ($scope.board[4] != "")) &&
      (($scope.board[3] == $scope.board[4]) && ($scope.board[3] == $scope.board[5]))
    ){
        winningPiece = $scope.board[3];
    }

    if(
      (($scope.board[6] != "") && ($scope.board[7] != "") && ($scope.board[8] != "")) &&
      (($scope.board[6] == $scope.board[7]) && ($scope.board[6] == $scope.board[8]))
    ){
        winningPiece = $scope.board[6];
    }

    if(winningPiece != ""){
      return [winningPiece, "1"];
    }
    else
    if(!$scope.board.includes("")){
      return ["-", "1"];
    }
    else{
      return["", "0"];
    }
  }
});
</script>
